# Generated by Django 4.0.9 on 2023-02-23 14:52

import django.db.models.deletion
from django.db import migrations, models

SQL = """
DROP INDEX msgs_msg_contact_id_created_on;
DROP INDEX msgs_msg_org_id_created_on_id_idx;
"""


class Migration(migrations.Migration):
    dependencies = [("orgs", "0119_squashed"), ("msgs", "0222_db_trigger_updates")]

    operations = [
        migrations.AlterField(
            model_name="msg",
            name="org",
            field=models.ForeignKey(
                db_index=False, on_delete=django.db.models.deletion.PROTECT, related_name="msgs", to="orgs.org"
            ),
        ),
        migrations.AddIndex(
            model_name="msg",
            index=models.Index(fields=["org", "-created_on", "-id"], name="msgs_by_org"),
        ),
        migrations.AddIndex(
            model_name="msg",
            index=models.Index(fields=["contact", "-created_on", "-id"], name="msgs_by_contact"),
        ),
        migrations.RunSQL(SQL),
    ]
